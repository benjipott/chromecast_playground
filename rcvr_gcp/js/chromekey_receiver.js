'use strict';function cr$a(a){throw a;}
var cr$b=void 0,cr$c=!0,cr$d=null,cr$e=!1,cr$,cr$f=this,cr$aa=function(a){a=a.split(".");for(var b=cr$f,c;c=a.shift();)if(b[c]!=cr$d)b=b[c];else return cr$d;return b},cr$ba=function(){cr$a(Error("unimplemented abstract method"))},cr$ca=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&
"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==b&&"undefined"==typeof a.call)return"object";return b},cr$g=function(a){return"array"==cr$ca(a)},cr$h=function(a){return"string"==typeof a},cr$i=function(a){return a[cr$da]||(a[cr$da]=++cr$ea)},cr$da="closure_uid_"+(1E9*Math.random()>>>
0),cr$ea=0,cr$fa=function(a,b,c){return a.call.apply(a.bind,arguments)},cr$ga=function(a,b,c){a||cr$a(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}},cr$j=function(a,b,c){cr$j=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cr$fa:cr$ga;return cr$j.apply(cr$d,arguments)},
cr$ha=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}},cr$k=Date.now||function(){return+new Date},cr$l=function(a,b){var c=a.split("."),d=cr$f;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==cr$b?d[e]=b:d=d[e]?d[e]:d[e]={}},cr$m=function(a,b){function c(){}c.prototype=b.prototype;a.f=b.prototype;a.prototype=new c};
Function.prototype.bind=Function.prototype.bind||function(a,b){if(1<arguments.length){var c=Array.prototype.slice.call(arguments,1);c.unshift(this,a);return cr$j.apply(cr$d,c)}return cr$j(this,a)};var cr$n=function(a){Error.captureStackTrace?Error.captureStackTrace(this,cr$n):this.stack=Error().stack||"";a&&(this.message=String(a))};cr$m(cr$n,Error);cr$n.prototype.name="CustomError";var cr$ia=function(a,b){for(var c=1;c<arguments.length;c++){var d=String(arguments[c]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,d)}return a},cr$oa=function(a){if(!cr$ja.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(cr$ka,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(cr$la,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(cr$ma,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(cr$na,"&quot;"));return a},cr$ka=/&/g,cr$la=/</g,cr$ma=/>/g,cr$na=/\"/g,cr$ja=/[&<>\"]/;var cr$o=function(a,b){b.unshift(a);cr$n.call(this,cr$ia.apply(cr$d,b));b.shift()};cr$m(cr$o,cr$n);cr$o.prototype.name="AssertionError";var cr$p=function(a,b,c){if(!a){var d=Array.prototype.slice.call(arguments,2),e="Assertion failed";if(b)var e=e+(": "+b),f=d;cr$a(new cr$o(""+e,f||[]))}},cr$pa=function(a,b){cr$a(new cr$o("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var cr$qa=Array.prototype,cr$ra=cr$qa.indexOf?function(a,b,c){cr$p(a.length!=cr$d);return cr$qa.indexOf.call(a,b,c)}:function(a,b,c){c=c==cr$d?0:0>c?Math.max(0,a.length+c):c;if(cr$h(a))return!cr$h(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},cr$ta=function(a,b){var c=cr$ra(a,b),d;(d=0<=c)&&cr$sa(a,c);return d},cr$sa=function(a,b){cr$p(a.length!=cr$d);return 1==cr$qa.splice.call(a,b,1).length};var cr$ua=function(a,b){for(var c in a)if(b.call(cr$b,a[c],c,a))return cr$c;return cr$e},cr$va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),cr$wa=function(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<cr$va.length;f++)c=cr$va[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var cr$q,cr$xa,cr$r,cr$ya,cr$za=function(){return cr$f.navigator?cr$f.navigator.userAgent:cr$d};cr$ya=cr$r=cr$xa=cr$q=cr$e;var cr$s;if(cr$s=cr$za()){var cr$Aa=cr$f.navigator;cr$q=0==cr$s.indexOf("Opera");cr$xa=!cr$q&&-1!=cr$s.indexOf("MSIE");cr$r=!cr$q&&-1!=cr$s.indexOf("WebKit");cr$ya=!cr$q&&!cr$r&&"Gecko"==cr$Aa.product}var cr$Ba=cr$q,cr$t=cr$xa,cr$u=cr$ya,cr$v=cr$r,cr$Ca=function(){var a=cr$f.document;return a?a.documentMode:cr$b},cr$Da;
t:{var cr$w="",cr$x;if(cr$Ba&&cr$f.opera)var cr$Ea=cr$f.opera.version,cr$w="function"==typeof cr$Ea?cr$Ea():cr$Ea;else if(cr$u?cr$x=/rv\:([^\);]+)(\)|;)/:cr$t?cr$x=/MSIE\s+([^\);]+)(\)|;)/:cr$v&&(cr$x=/WebKit\/(\S+)/),cr$x)var cr$Fa=cr$x.exec(cr$za()),cr$w=cr$Fa?cr$Fa[1]:"";if(cr$t){var cr$Ga=cr$Ca();if(cr$Ga>parseFloat(cr$w)){cr$Da=String(cr$Ga);break t}}cr$Da=cr$w}
var cr$Ha=cr$Da,cr$Ia={},cr$y=function(a){var b;if(!(b=cr$Ia[a])){b=0;for(var c=String(cr$Ha).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",k=d[f]||"",h=/(\d*)(\D*)/g,n=/(\d*)(\D*)/g;do{var l=h.exec(g)||["","",""],m=n.exec(k)||["","",""];if(0==l[0].length&&0==m[0].length)break;b=((0==l[1].length?0:parseInt(l[1],10))<(0==m[1].length?0:parseInt(m[1],10))?-1:(0==l[1].length?0:
parseInt(l[1],10))>(0==m[1].length?0:parseInt(m[1],10))?1:0)||((0==l[2].length)<(0==m[2].length)?-1:(0==l[2].length)>(0==m[2].length)?1:0)||(l[2]<m[2]?-1:l[2]>m[2]?1:0)}while(0==b)}b=cr$Ia[a]=0<=b}return b},cr$Ja=cr$f.document,cr$Ka=!cr$Ja||!cr$t?cr$b:cr$Ca()||("CSS1Compat"==cr$Ja.compatMode?parseInt(cr$Ha,10):5);var cr$Ma=function(a){return cr$La(a||arguments.callee.caller,[])},cr$La=function(a,b){var c=[];if(0<=cr$ra(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(cr$Na(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){0<e&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=cr$Na(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,
40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(cr$La(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?c.push("[...long stack...]"):c.push("[end]");return c.join("")},cr$Na=function(a){if(cr$z[a])return cr$z[a];a=String(a);if(!cr$z[a]){var b=/function ([^\(]+)/.exec(a);cr$z[a]=b?b[1]:"[Anonymous]"}return cr$z[a]},cr$z={};var cr$A=function(a,b,c,d,e){this.reset(a,b,c,d,e)};cr$A.prototype.ma=cr$d;cr$A.prototype.la=cr$d;var cr$Oa=0;cr$A.prototype.reset=function(a,b,c,d,e){"number"==typeof e||cr$Oa++;this.Ka=d||cr$k();this.A=a;this.Ea=b;this.Ja=c;delete this.ma;delete this.la};cr$A.prototype.pa=function(){return this.A};cr$A.prototype.ta=function(a){this.A=a};var cr$B=function(a){this.qb=a};cr$B.prototype.m=cr$d;cr$B.prototype.A=cr$d;cr$B.prototype.sa=cr$d;cr$B.prototype.M=cr$d;var cr$C=function(a,b){this.name=a;this.value=b};cr$C.prototype.toString=function(){return this.name};
var cr$Pa=new cr$C("SHOUT",1200),cr$Qa=new cr$C("SEVERE",1E3),cr$Ra=new cr$C("WARNING",900),cr$Sa=new cr$C("INFO",800),cr$Ta=new cr$C("CONFIG",700),cr$Ua=new cr$C("FINE",500),cr$Va=new cr$C("FINER",400),cr$Wa=[new cr$C("OFF",Infinity),cr$Pa,cr$Qa,cr$Ra,cr$Sa,cr$Ta,cr$Ua,cr$Va,new cr$C("FINEST",300),new cr$C("ALL",0)],cr$D=cr$d,cr$Xa=function(a){if(!cr$D){cr$D={};for(var b=0,c;c=cr$Wa[b];b++)cr$D[c.value]=c,cr$D[c.name]=c}if(a in cr$D)return cr$D[a];for(b=0;b<cr$Wa.length;++b)if(c=cr$Wa[b],c.value<=
a)return c;return cr$d};cr$B.prototype.getParent=function(){return this.m};cr$B.prototype.ta=function(a){this.A=a};cr$B.prototype.pa=function(){return this.A};var cr$Ya=function(a){if(a.A)return a.A;if(a.m)return cr$Ya(a.m);cr$pa("Root logger has no level set.");return cr$d};
cr$B.prototype.log=function(a,b,c){if(a.value>=cr$Ya(this).value){a=this.rb(a,b,c);b="log:"+a.Ea;cr$f.console&&(cr$f.console.timeStamp?cr$f.console.timeStamp(b):cr$f.console.markTimeline&&cr$f.console.markTimeline(b));cr$f.msWriteProfilerMark&&cr$f.msWriteProfilerMark(b);for(b=this;b;){c=b;var d=a;if(c.M)for(var e=0,f=cr$b;f=c.M[e];e++)f(d);b=b.getParent()}}};
cr$B.prototype.rb=function(a,b,c){var d=new cr$A(a,String(b),this.qb);if(c){d.ma=c;var e;var f=arguments.callee.caller;try{var g;var k=cr$aa("window.location.href");if(cr$h(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:k,stack:"Not available"};else{var h,n,l=cr$e;try{h=c.lineNumber||c.yb||"Not available"}catch(m){h="Not available",l=cr$c}try{n=c.fileName||c.filename||c.sourceURL||cr$f.$googDebugFname||k}catch(p){n="Not available",l=cr$c}g=l||!c.lineNumber||!c.fileName||
!c.stack?{message:c.message,name:c.name,lineNumber:h,fileName:n,stack:c.stack||"Not available"}:c}e="Message: "+cr$oa(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+cr$oa(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+cr$oa(cr$Ma(f)+"-> ")}catch(q){e="Exception trying to expose exception! You win, we lose. "+q}d.la=e}return d};var cr$E=function(a,b){a.log(cr$Qa,b,cr$b)};
cr$B.prototype.info=function(a,b){this.log(cr$Sa,a,b)};var cr$F=function(a,b){a.log(cr$Ua,b,cr$b)},cr$G=function(a,b){a.log(cr$Va,b,cr$b)},cr$Za={},cr$H=cr$d,cr$_a=function(){cr$H||(cr$H=new cr$B(""),cr$Za[""]=cr$H,cr$H.ta(cr$Ta))},cr$I=function(a){cr$_a();var b;if(!(b=cr$Za[a])){b=new cr$B(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=cr$I(a.substr(0,c));c.sa||(c.sa={});c.sa[d]=b;b.m=c;cr$Za[a]=b}return b};var cr$J=function(){};cr$J.prototype.Ra=cr$e;cr$J.prototype.i=function(){this.Ra||(this.Ra=cr$c,this.d())};var cr$0a=function(a,b){a.N||(a.N=[]);a.N.push(cr$j(b,cr$b))};cr$J.prototype.d=function(){if(this.N)for(;this.N.length;)this.N.shift()()};var cr$1a=function(a){a&&"function"==typeof a.i&&a.i()};var cr$K=function(a,b){this.type=a;this.currentTarget=this.target=b};cr$=cr$K.prototype;cr$.d=function(){};cr$.i=function(){};cr$.w=cr$e;cr$.defaultPrevented=cr$e;cr$.Na=cr$c;cr$.preventDefault=function(){this.defaultPrevented=cr$c;this.Na=cr$e};var cr$L=cr$I("chromekey.receiver");cr$L.wb=function(a){cr$L.ta(cr$Xa(a))};var cr$2a=function(a,b,c){cr$K.call(this,a,c);this.message=b};cr$m(cr$2a,cr$K);var cr$3a=function(a,b){for(var c=1;c<arguments.length;++c)arguments[c]in a||cr$a(Error("Mandatory field missing: "+arguments[c]))};var cr$4a=function(a){cr$4a[" "](a);return a};cr$4a[" "]=function(){};var cr$5a;if(!(cr$5a=!cr$t))cr$5a=cr$t&&9<=cr$Ka;var cr$6a=cr$5a,cr$7a=cr$t&&!cr$y("9");!cr$v||cr$y("528");cr$u&&cr$y("1.9b")||cr$t&&cr$y("8")||cr$Ba&&cr$y("9.5")||cr$v&&cr$y("528");cr$u&&!cr$y("8")||cr$t&&cr$y("9");var cr$M=function(a,b){a&&cr$8a(this,a,b)};cr$m(cr$M,cr$K);cr$=cr$M.prototype;cr$.target=cr$d;cr$.relatedTarget=cr$d;cr$.offsetX=0;cr$.offsetY=0;cr$.clientX=0;cr$.clientY=0;cr$.screenX=0;cr$.screenY=0;cr$.button=0;cr$.keyCode=0;cr$.charCode=0;cr$.ctrlKey=cr$e;cr$.altKey=cr$e;cr$.shiftKey=cr$e;cr$.metaKey=cr$e;cr$.Sa=cr$d;
var cr$8a=function(a,b,c){var d=a.type=b.type;cr$K.call(a,d);a.target=b.target||b.srcElement;a.currentTarget=c;if(c=b.relatedTarget){if(cr$u){var e;t:{try{cr$4a(c.nodeName);e=cr$c;break t}catch(f){}e=cr$e}e||(c=cr$d)}}else"mouseover"==d?c=b.fromElement:"mouseout"==d&&(c=b.toElement);a.relatedTarget=c;a.offsetX=cr$v||b.offsetX!==cr$b?b.offsetX:b.layerX;a.offsetY=cr$v||b.offsetY!==cr$b?b.offsetY:b.layerY;a.clientX=b.clientX!==cr$b?b.clientX:b.pageX;a.clientY=b.clientY!==cr$b?b.clientY:b.pageY;a.screenX=
b.screenX||0;a.screenY=b.screenY||0;a.button=b.button;a.keyCode=b.keyCode||0;a.charCode=b.charCode||("keypress"==d?b.keyCode:0);a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.shiftKey=b.shiftKey;a.metaKey=b.metaKey;a.state=b.state;a.Sa=b;b.defaultPrevented&&a.preventDefault();delete a.w};
cr$M.prototype.preventDefault=function(){cr$M.f.preventDefault.call(this);var a=this.Sa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=cr$e,cr$7a)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};cr$M.prototype.d=function(){};var cr$9a="closure_listenable_"+(1E6*Math.random()|0),cr$N=function(a){return!(!a||!a[cr$9a])},cr$$a=0;var cr$ab=function(a,b,c,d,e,f){this.o=a;this.Pa=b;this.src=c;this.type=d;this.capture=!!e;this.v=f;this.key=++cr$$a;this.l=this.I=cr$e};var cr$O={},cr$P={},cr$Q={},cr$R={},cr$S=function(a,b,c,d,e){if(cr$g(b)){for(var f=0;f<b.length;f++)cr$S(a,b[f],c,d,e);return cr$d}c=cr$bb(c);if(cr$N(a))a=a.Y(b,c,d,e);else t:{b||cr$a(Error("Invalid event type"));d=!!d;var g=cr$P;b in g||(g[b]={q:0,r:0});g=g[b];d in g||(g[d]={q:0,r:0},g.q++);var g=g[d],f=cr$i(a),k;g.r++;if(g[f]){k=g[f];for(var h=0;h<k.length;h++)if(g=k[h],g.o==c&&g.v==e){if(g.l)break;k[h].I=cr$e;a=k[h];break t}}else k=g[f]=[],g.q++;h=cr$cb();g=new cr$ab(c,h,a,b,d,e);g.I=cr$e;h.src=
a;h.o=g;k.push(g);cr$Q[f]||(cr$Q[f]=[]);cr$Q[f].push(g);a.addEventListener?a.addEventListener(b,h,d):a.attachEvent(b in cr$R?cr$R[b]:cr$R[b]="on"+b,h);a=cr$O[g.key]=g}return a},cr$cb=function(){var a=cr$db,b=cr$6a?function(c){return a.call(b.src,b.o,c)}:function(c){c=a.call(b.src,b.o,c);if(!c)return c};return b},cr$eb=function(a,b,c,d,e){if(cr$g(b))for(var f=0;f<b.length;f++)cr$eb(a,b[f],c,d,e);else if(c=cr$bb(c),cr$N(a))a.oa(b,c,d,e);else if(d=!!d,a=cr$fb(a,b,d))for(f=0;f<a.length;f++)if(a[f].o==
c&&a[f].capture==d&&a[f].v==e){cr$T(a[f]);break}},cr$T=function(a){if("number"==typeof a||!a||a.l)return cr$e;var b=a.src;if(cr$N(b))return cr$gb(b,a);var c=a.type,d=a.Pa,e=a.capture;b.removeEventListener?b.removeEventListener(c,d,e):b.detachEvent&&b.detachEvent(c in cr$R?cr$R[c]:cr$R[c]="on"+c,d);b=cr$i(b);cr$Q[b]&&(d=cr$Q[b],cr$ta(d,a),0==d.length&&delete cr$Q[b]);a.l=cr$c;a.o=cr$d;a.Pa=cr$d;a.src=cr$d;a.v=cr$d;if(d=cr$P[c][e][b])d.Oa=cr$c,cr$hb(c,e,b,d);delete cr$O[a.key];return cr$c},cr$hb=function(a,
b,c,d){if(!d.ba&&d.Oa){for(var e=0,f=0;e<d.length;e++)d[e].l||(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Oa=cr$e;0==f&&(delete cr$P[a][b][c],cr$P[a][b].q--,0==cr$P[a][b].q&&(delete cr$P[a][b],cr$P[a].q--),0==cr$P[a].q&&delete cr$P[a])}},cr$fb=function(a,b,c){var d=cr$P;return b in d&&(d=d[b],c in d&&(d=d[c],a=cr$i(a),d[a]))?d[a]:cr$d},cr$jb=function(a){if(cr$N(a))return cr$ib(a);a=cr$i(a);return cr$Q[a]?cr$c:cr$e},cr$lb=function(a,b,c,d,e){var f=1;b=cr$i(b);if(a[b]){var g=--a.r,k=a[b];k.ba?k.ba++:k.ba=
1;try{for(var h=k.length,n=0;n<h;n++){var l=k[n];l&&!l.l&&(f&=cr$kb(l,e)!==cr$e)}}finally{a.r=Math.max(g,a.r),k.ba--,cr$hb(c,d,b,k)}}return Boolean(f)},cr$kb=function(a,b){var c=a.o,d=a.v||a.src;a.I&&cr$T(a);return c.call(d,b)},cr$db=function(a,b){if(a.l)return cr$c;var c=a.type,d=cr$P;if(!(c in d))return cr$c;var d=d[c],e,f;if(!cr$6a){e=b||cr$aa("window.event");var g=cr$c in d,k=cr$e in d;if(g){if(0>e.keyCode||e.returnValue!=cr$b)return cr$c;t:{var h=cr$e;if(0==e.keyCode)try{e.keyCode=-1;break t}catch(n){h=
cr$c}if(h||e.returnValue==cr$b)e.returnValue=cr$c}}h=new cr$M;cr$8a(h,e,this);e=cr$c;try{if(g){for(var l=[],m=h.currentTarget;m;m=m.parentNode)l.push(m);f=d[cr$c];f.r=f.q;for(var p=l.length-1;!h.w&&0<=p&&f.r;p--)h.currentTarget=l[p],e&=cr$lb(f,l[p],c,cr$c,h);if(k){f=d[cr$e];f.r=f.q;for(p=0;!h.w&&p<l.length&&f.r;p++)h.currentTarget=l[p],e&=cr$lb(f,l[p],c,cr$e,h)}}else e=cr$kb(a,h)}finally{l&&(l.length=0)}return e}c=new cr$M(b,this);return e=cr$kb(a,c)},cr$mb="__closure_events_fn_"+(1E9*Math.random()>>>
0),cr$bb=function(a){cr$p(a,"Listener can not be null.");if("function"==cr$ca(a))return a;cr$p(a.handleEvent,"An object listener must have handleEvent method.");return a[cr$mb]||(a[cr$mb]=function(b){return a.handleEvent(b)})};var cr$U=function(){this.k={};this.lb=this};cr$m(cr$U,cr$J);cr$U.prototype[cr$9a]=cr$c;cr$=cr$U.prototype;cr$.O=cr$d;cr$.addEventListener=function(a,b,c,d){cr$S(this,a,b,c,d)};cr$.removeEventListener=function(a,b,c,d){cr$eb(this,a,b,c,d)};
cr$.dispatchEvent=function(a){cr$nb(this);var b,c=this.O;if(c){b=[];for(var d=1;c;c=c.O)b.push(c),cr$p(1E3>++d,"infinite loop")}c=this.lb;d=a.type||a;if(cr$h(a))a=new cr$K(a,c);else if(a instanceof cr$K)a.target=a.target||c;else{var e=a;a=new cr$K(d,c);cr$wa(a,e)}var e=cr$c,f;if(b)for(var g=b.length-1;!a.w&&0<=g;g--)f=a.currentTarget=b[g],e=cr$ob(f,d,cr$c,a)&&e;a.w||(f=a.currentTarget=c,e=cr$ob(f,d,cr$c,a)&&e,a.w||(e=cr$ob(f,d,cr$e,a)&&e));if(b)for(g=0;!a.w&&g<b.length;g++)f=a.currentTarget=b[g],
e=cr$ob(f,d,cr$e,a)&&e;return e};cr$.d=function(){cr$U.f.d.call(this);var a=0,b;for(b in this.k){for(var c=this.k[b],d=0;d<c.length;d++)++a,delete cr$O[c[d].key],c[d].l=cr$c;c.length=0}this.O=cr$d};var cr$nb=function(a){cr$p(a.k,"Event target is not initialized. Did you call superclass (goog.events.EventTarget) constructor?")};
cr$U.prototype.Y=function(a,b,c,d){cr$nb(this);var e=this.k[a]||(this.k[a]=[]),f=cr$pb(e,b,c,d);-1<f?(a=e[f],a.I=cr$e):(a=new cr$ab(b,cr$d,this,a,!!c,d),a.I=cr$e,e.push(a));return a};cr$U.prototype.oa=function(a,b,c,d){if(!(a in this.k))return cr$e;a=this.k[a];b=cr$pb(a,b,c,d);return-1<b?(c=a[b],delete cr$O[c.key],c.l=cr$c,cr$sa(a,b)):cr$e};
var cr$gb=function(a,b){var c=b.type;if(!(c in a.k))return cr$e;if(c=cr$ta(a.k[c],b))delete cr$O[b.key],b.l=cr$c;return c},cr$ob=function(a,b,c,d){if(!(b in a.k))return cr$c;var e=cr$c;b=a.k[b];var f=b.length;if(0<f){for(var g=Array(f),k=0;k<f;k++)g[k]=b[k];b=g}else b=[];for(f=0;f<b.length;++f)if((g=b[f])&&!g.l&&g.capture==c){var k=g.o,h=g.v||g.src;g.I&&cr$gb(a,g);e=k.call(h,d)!==cr$e&&e}return e&&d.Na!=cr$e},cr$ib=function(a){return cr$ua(a.k,function(a){for(;0<a.length;)return cr$c;return cr$e})},
cr$pb=function(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(f.o==b&&f.capture==!!c&&f.v==d)return e}return-1};var cr$V=function(){cr$U.call(this)};cr$m(cr$V,cr$U);var cr$W={OPEN:"a",CLOSED:"b",ERROR:"c",MESSAGE:"d"};cr$V.prototype.a=cr$I("chromekey.receiver.Channel");cr$V.prototype.b=function(){return"unknown"};cr$V.prototype.onOpen=function(){var a=cr$W.OPEN;this.a.info("Dispatching event: "+a+" to "+this.b());this.dispatchEvent(a)};cr$V.prototype.onClosed=function(){var a=cr$W.CLOSED;this.a.info("Dispatching event: "+a+" to "+this.b());this.dispatchEvent(a)};
cr$V.prototype.onError=function(){var a=cr$W.ERROR;cr$E(this.a,"Dispatching event: "+a+" to "+this.b());this.dispatchEvent(a)};cr$V.prototype.onMessage=function(a){var b=cr$W.MESSAGE;cr$G(this.a,"Dispatching event: "+b+" to "+this.b()+", message="+a);this.dispatchEvent(new cr$2a(b,a,this))};cr$V.prototype.open=cr$ba;cr$V.prototype.close=cr$ba;cr$V.prototype.isOpen=function(){return cr$e};cr$V.prototype.send=cr$ba;cr$V.prototype.d=function(){cr$V.f.d.call(this);cr$F(this.a,"Disposed "+this.b())};var cr$qb=function(a,b,c){cr$K.call(this,a,c);this.channel=b};cr$m(cr$qb,cr$K);var cr$X=function(){cr$U.call(this)};cr$m(cr$X,cr$U);var cr$rb={CHANNEL_CREATED:"e"};cr$X.prototype.a=cr$I("chromekey.receiver.ChannelFactory");cr$X.prototype.b=function(){return"unknown"};cr$X.prototype.ka=function(a){var b=cr$rb.CHANNEL_CREATED;cr$F(this.a,"Dispatch event: "+b+" to "+this.b());this.dispatchEvent(new cr$qb(b,a,this))};cr$X.prototype.d=function(){cr$X.f.d.call(this);cr$F(this.a,"Disposed "+this.b())};var cr$Y=function(a){cr$U.call(this);this.pb=a;this.t=[];this.s=[]};cr$m(cr$Y,cr$U);cr$Y.prototype.a=cr$I("chromekey.receiver.ChannelHandler");cr$Y.prototype.b=function(){return this.pb};var cr$sb=function(a,b){for(var c=a.t.length,d=0;d<c;++d)if(a.t[d][0]==b)return d;return-1};cr$Y.prototype.Ma=function(a){if(0<=cr$sb(this,a))return cr$e;this.t.push([a,cr$S(a,cr$rb.CHANNEL_CREATED,cr$j(this.Za,this))]);this.a.info("New channel factory added: "+a.b()+" to "+this.b());return cr$c};
cr$Y.prototype.vb=function(a){var b=cr$sb(this,a);if(0>b)return cr$e;cr$T(this.t[b][1]);this.t.splice(b,1);this.a.info("Channel factory removed: "+a.b()+" from "+this.b());return cr$c};
cr$Y.prototype.Za=function(a){var b=a.channel;if(b){if(0<=this.s.indexOf(b)){cr$E(this.a,"Duplicated channel: "+b.b()+" in "+this.b());return}}else cr$a(Error("Channel is not specified on event: "+a.type));this.s.push(b);b.O=this;cr$S(b,cr$W.OPEN,cr$j(this.onOpen,this));cr$S(b,cr$W.CLOSED,cr$j(this.onClosed,this));cr$S(b,cr$W.ERROR,cr$j(this.onError,this));cr$S(b,cr$W.MESSAGE,cr$j(this.onMessage,this));this.a.info("New channel added: "+b.b()+" to "+this.b());b.open()};
cr$Y.prototype.onOpen=function(a){cr$F(this.a,"Channel open: "+a.target.b()+" in "+this.b())};cr$Y.prototype.onClosed=function(a){a=a.target;var b=this.s.indexOf(a);0<=b&&(this.s.splice(b,1),a.i(),this.a.info("Channel removed: "+a.b()+" from "+this.b()))};cr$Y.prototype.onError=function(a){a=a.target;cr$E(this.a,"Channel error: "+a.b()+" in "+this.b());a.close()};cr$Y.prototype.onMessage=function(a){cr$G(this.a,"Message received: "+a.target.b()+" in "+this.b()+", message="+a.message)};
cr$Y.prototype.Z=function(){return this.s};cr$Y.prototype.d=function(){cr$Y.f.d.call(this);for(var a=this.t.length,b=0;b<a;++b)this.t[b][0].i();this.t=[];a=this.s.length;for(b=0;b<a;++b)this.s[b].i();this.s=[];cr$F(this.a,"Disposed "+this.b())};var cr$tb=function(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}cr$a(Error("Invalid JSON string: "+a))},cr$wb=function(a){var b=[];cr$ub(new cr$vb,a,b);return b.join("")},cr$vb=function(){this.ca=cr$b},cr$ub=function(a,b,c){switch(typeof b){case "string":cr$xb(b,
c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(b==cr$d){c.push("null");break}if(cr$g(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],cr$ub(a,a.ca?a.ca.call(b,String(f),e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),cr$xb(f,c),c.push(":"),cr$ub(a,a.ca?a.ca.call(b,f,e):e,c),
d=","));c.push("}");break;case "function":break;default:cr$a(Error("Unknown type: "+typeof b))}},cr$yb={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},cr$zb=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,cr$xb=function(a,b){b.push('"',a.replace(cr$zb,function(a){if(a in cr$yb)return cr$yb[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return cr$yb[a]=e+b.toString(16)}),'"')};var cr$Z=function(a,b){cr$U.call(this);this.aa=a||1;this.J=b||cr$Ab;this.qa=cr$j(this.nb,this);this.ra=cr$k()};cr$m(cr$Z,cr$U);cr$Z.prototype.enabled=cr$e;var cr$Ab=cr$f;cr$=cr$Z.prototype;cr$.p=cr$d;cr$.nb=function(){if(this.enabled){var a=cr$k()-this.ra;0<a&&a<0.8*this.aa?this.p=this.J.setTimeout(this.qa,this.aa-a):(this.p&&(this.J.clearTimeout(this.p),this.p=cr$d),this.dispatchEvent("tick"),this.enabled&&(this.p=this.J.setTimeout(this.qa,this.aa),this.ra=cr$k()))}};
cr$.start=function(){this.enabled=cr$c;this.p||(this.p=this.J.setTimeout(this.qa,this.aa),this.ra=cr$k())};cr$.stop=function(){this.enabled=cr$e;this.p&&(this.J.clearTimeout(this.p),this.p=cr$d)};cr$.d=function(){cr$Z.f.d.call(this);this.stop();delete this.J};var cr$Bb=function(a,b,c){"function"==cr$ca(a)?c&&(a=cr$j(a,c)):a&&"function"==typeof a.handleEvent?a=cr$j(a.handleEvent,a):cr$a(Error("Invalid listener argument"));return 2147483647<b?-1:cr$Ab.setTimeout(a,b||0)};var cr$_=function(a,b){cr$U.call(this);this.Va=a!==cr$b?a:cr$c;this.ga=b||cr$Cb;this.U=this.ga(this.K)};cr$m(cr$_,cr$U);cr$=cr$_.prototype;cr$.j=cr$d;cr$.h=cr$d;cr$.F=cr$b;cr$.ha=cr$e;cr$.K=0;cr$.a=cr$I("goog.net.WebSocket");var cr$0={CLOSED:"f",ERROR:"g",MESSAGE:"h",Ab:"i"},cr$Db={CONNECTING:0,OPEN:1,zb:2,CLOSED:3},cr$Cb=function(a){return Math.min(1E3*Math.pow(2,a),6E4)};
cr$_.prototype.open=function(a,b){cr$p(cr$f.WebSocket,"This browser does not support WebSocket");cr$p(!this.isOpen(),"The WebSocket is already open");this.D!=cr$d&&cr$Ab.clearTimeout(this.D);this.D=cr$d;this.h=a;(this.F=b)?(this.a.info("Opening the WebSocket on "+this.h+" with protocol "+this.F),this.j=new WebSocket(this.h,this.F)):(this.a.info("Opening the WebSocket on "+this.h),this.j=new WebSocket(this.h));this.j.onopen=cr$j(this.Ya,this);this.j.onclose=cr$j(this.Wa,this);this.j.onmessage=cr$j(this.ea,
this);this.j.onerror=cr$j(this.Xa,this)};cr$_.prototype.close=function(){this.D!=cr$d&&cr$Ab.clearTimeout(this.D);this.D=cr$d;this.j&&(this.a.info("Closing the WebSocket."),this.ha=cr$c,this.j.close(),this.j=cr$d)};cr$_.prototype.send=function(a){cr$p(this.isOpen(),"Cannot send without an open socket");this.j.send(a)};cr$_.prototype.isOpen=function(){return!!this.j&&this.j.readyState==cr$Db.OPEN};cr$=cr$_.prototype;
cr$.Ya=function(){this.a.info("WebSocket opened on "+this.h);this.dispatchEvent("i");this.K=0;this.U=this.ga(this.K)};
cr$.Wa=function(a){this.a.info("The WebSocket on "+this.h+" closed.");this.dispatchEvent(cr$0.CLOSED);this.j=cr$d;this.ha?(this.a.info("The WebSocket closed normally."),this.h=cr$d,this.F=cr$b):(cr$E(this.a,"The WebSocket disconnected unexpectedly: "+a.data),this.Va&&(this.a.info("Seconds until next reconnect attempt: "+Math.floor(this.U/1E3)),this.D=cr$Bb(cr$j(this.open,this,this.h,this.F),this.U,this),this.K++,this.U=this.ga(this.K)));this.ha=cr$e};cr$.ea=function(a){this.dispatchEvent(new cr$Eb(a.data))};
cr$.Xa=function(a){a=a.data;cr$E(this.a,"An error occurred: "+a);this.dispatchEvent(new cr$Fb(a))};cr$.d=function(){cr$_.f.d.call(this);this.close()};var cr$Eb=function(a){cr$K.call(this,cr$0.MESSAGE);this.message=a};cr$m(cr$Eb,cr$K);var cr$Fb=function(a){cr$K.call(this,cr$0.ERROR);this.data=a};cr$m(cr$Fb,cr$K);var cr$1=function(a){cr$U.call(this);this.h=a;this.e=new cr$_(cr$e);this.Ca=cr$e};cr$m(cr$1,cr$V);cr$1.prototype.a=cr$I("chromekey.receiver.ChannelOverWebSocket");cr$1.prototype.b=function(){return this.h};cr$1.prototype.fa=function(a){this.onMessage(a.message)};
cr$1.prototype.open=function(){this.Ca||(this.Ca=cr$c,this.a.info("Open websocket: url="+this.h),cr$S(this.e,"i",cr$j(this.onOpen,this)),cr$S(this.e,cr$0.CLOSED,cr$j(this.onClosed,this)),cr$S(this.e,cr$0.ERROR,cr$j(this.onError,this)),cr$S(this.e,cr$0.MESSAGE,cr$j(this.fa,this)),this.e.open(this.h))};cr$1.prototype.close=function(){this.a.info("Close websocket: url="+this.h);this.e.close()};cr$1.prototype.isOpen=function(){return this.e.isOpen()};
cr$1.prototype.send=function(a){"string"!=typeof a&&cr$a(Error("Invalid message to send via "+this.b()));cr$G(this.a,"Sending message: "+a+" from "+this.b());this.e.send(a)};cr$1.prototype.d=function(){cr$1.f.d.call(this);this.e.i()};var cr$2=function(a){cr$U.call(this);this.g=a;this.X=cr$c;this.G=[];this.G.push(cr$S(this.g,cr$W.OPEN,cr$j(this.onOpen,this)));this.G.push(cr$S(this.g,cr$W.CLOSED,cr$j(this.onClosed,this)));this.G.push(cr$S(this.g,cr$W.ERROR,cr$j(this.onError,this)));this.G.push(cr$S(this.g,cr$W.MESSAGE,cr$j(this.fa,this)))};cr$m(cr$2,cr$V);cr$2.prototype.b=function(){return this.g.b()};cr$2.prototype.fa=function(a){this.onMessage(a.message)};
cr$2.prototype.open=function(){this.X=cr$e;if(this.g.isOpen())this.onOpen();else this.g.open()};cr$2.prototype.close=function(){this.X=cr$c;this.onClosed()};cr$2.prototype.isOpen=function(){return this.g.isOpen()&&!this.X};cr$2.prototype.send=function(a){this.g.send(a)};cr$2.prototype.d=function(){cr$2.f.d.call(this);this.X=cr$c;for(var a=this.G.length,b=0;b<a;++b)cr$T(this.G[b]);cr$jb(this.g)||(this.g.close(),this.g.i())};var cr$Gb=function(a){cr$2.call(this,a);this.Da=0};cr$m(cr$Gb,cr$2);cr$Gb.prototype.onMessage=function(a){a instanceof Array&&2==a.length&&"cm"==a[0]?"pong"==a[1].type?this.Da=0:this.a.info("Unknown cm message: "+a[1]):cr$Gb.f.onMessage.call(this,a)};var cr$3=function(a){cr$2.call(this,a)};cr$m(cr$3,cr$2);cr$3.prototype.onMessage=function(a){try{cr$3.f.onMessage.call(this,cr$tb(a))}catch(b){cr$E(this.a,b),this.onError()}};cr$3.prototype.send=function(a){cr$3.f.send.call(this,cr$wb(a))};var cr$4=function(a,b,c,d){cr$U.call(this);this.V=a;this.ja=b;this.ia=d!=cr$d?d:0;this.Ba=c||cr$d;this.e=new cr$_(cr$e);this.$=new cr$Y("heartbeatChannelHandler");cr$0a(this,cr$ha(cr$1a,this.$));this.$.Ma(this);this.T=new cr$Z(1E3*this.ia);cr$0a(this,cr$ha(cr$1a,this.T));cr$S(this.T,"tick",cr$j(this.fb,this))};cr$m(cr$4,cr$X);cr$4.prototype.a=cr$I("chromekey.receiver.ConnectionService");cr$4.prototype.b=function(){return this.V};cr$4.prototype.Ta=function(a){return 0<=this.ja.indexOf(a)};
cr$4.prototype.onClosed=function(a){this.a.info("Got event: "+a.type)};cr$4.prototype.onError=function(a){cr$E(this.a,"Got event: "+a.type);this.disconnect()};cr$4.prototype.$a=function(a){this.a.info("Got event: "+a.type);cr$F(this.a,"Register: app="+this.V+", protocols="+this.ja+", appContext="+this.Ba);this.e.send(cr$wb({type:"REGISTER",version:2,name:this.V,protocols:this.ja,pingInterval:this.ia,eventChannel:0,appContext:this.Ba}))};cr$4.prototype.onChannelRequest=cr$b;cr$=cr$4.prototype;
cr$.ea=function(a){cr$G(this.a,"Got event: type="+a.type+", message="+a.message);try{var b=cr$tb(a.message);cr$3a(b,"type");if("ERROR"==b.type)this.onError(new cr$K(cr$0.ERROR,this));else if("CHANNELREQUEST"==b.type)if(cr$3a(b,"requestId"),cr$F(this.a,"Got CHANNELREQUEST: requestId="+b.requestId),!this.onChannelRequest||this.onChannelRequest(this.V,b.senderId)){var c=b.requestId;cr$F(this.a,"Accept: requiestId="+c);this.e.send(cr$wb({type:"CHANNELRESPONSE",requestId:c,action:0}))}else{var d=b.requestId;
cr$F(this.a,"Reject: requiestId="+d);this.e.send(cr$wb({type:"CHANNELRESPONSE",requestId:d,action:1}))}else if("NEWCHANNEL"==b.type){cr$3a(b,"requestId","URL");cr$F(this.a,"Got NEWCHANNEL: requestId="+b.requestId+", URL="+b.URL);var e=new cr$Gb(new cr$3(new cr$1(b.URL)));this.ka(e);0<this.ia&&this.T.start()}else cr$a(Error("Unknown message type: "+b.type))}catch(f){f instanceof SyntaxError?cr$E(this.a,"Invalid JSON error: message="+a.message):cr$E(this.a,f),cr$G(this.a,"Disconnect on any type of error."),
this.disconnect()}};cr$.Fa=function(a){a=a||"ws://localhost:8008/connection";this.a.info("Open connection service websocket: url="+a);cr$S(this.e,"i",cr$j(this.$a,this));cr$S(this.e,cr$0.CLOSED,cr$j(this.onClosed,this));cr$S(this.e,cr$0.ERROR,cr$j(this.onError,this));cr$S(this.e,cr$0.MESSAGE,cr$j(this.ea,this));this.e.open(a)};cr$.disconnect=function(){this.a.info("Close connection service websocket");this.e.close()};cr$.ub=function(){return this.e.isOpen()};
cr$.fb=function(){var a=[];this.$.Z().forEach(function(b){var c;b.isOpen()?2<++b.Da?c=cr$e:(b.send(["cm",{type:"ping"}]),c=cr$c):c=cr$c;c||a.push(b)});a.forEach(function(a){a.close();a.onClosed()});0==this.$.Z().length&&this.T.stop()};cr$.d=function(){cr$4.f.d.call(this);this.e.i()};var cr$Hb=function(){this.Ua=cr$k()},cr$Ib=new cr$Hb;cr$Hb.prototype.set=function(a){this.Ua=a};cr$Hb.prototype.reset=function(){this.set(cr$k())};cr$Hb.prototype.get=function(){return this.Ua};var cr$Jb=function(a){this.cb=a||"";this.eb=cr$Ib};cr$=cr$Jb.prototype;cr$.Ha=cr$c;cr$.hb=cr$c;cr$.gb=cr$c;cr$.Ia=cr$e;cr$.ib=cr$e;var cr$5=function(a){return 10>a?"0"+a:String(a)},cr$Kb=function(a,b){var c=(a.Ka-b)/1E3,d=c.toFixed(3),e=0;if(1>c)e=2;else for(;100>c;)e++,c*=10;for(;0<e--;)d=" "+d;return d},cr$Lb=function(a){cr$Jb.call(this,a)};cr$m(cr$Lb,cr$Jb);var cr$Mb=function(){this.jb=cr$j(this.mb,this);this.na=new cr$Lb;this.na.Ha=cr$e;this.Qa=this.na.Ia=cr$e;this.Ga="";this.bb={}};
cr$Mb.prototype.mb=function(a){if(!this.bb[a.Ja]){var b;b=this.na;var c=[];c.push(b.cb," ");if(b.Ha){var d=new Date(a.Ka);c.push("[",cr$5(d.getFullYear()-2E3)+cr$5(d.getMonth()+1)+cr$5(d.getDate())+" "+cr$5(d.getHours())+":"+cr$5(d.getMinutes())+":"+cr$5(d.getSeconds())+"."+cr$5(Math.floor(d.getMilliseconds()/10)),"] ")}b.hb&&c.push("[",cr$Kb(a,b.eb.get()),"s] ");b.gb&&c.push("[",a.Ja,"] ");b.ib&&c.push("[",a.pa().name,"] ");c.push(a.Ea,"\n");b.Ia&&a.ma&&c.push(a.la,"\n");b=c.join("");if(c=cr$Nb)switch(a.pa()){case cr$Pa:cr$Ob(c,
"info",b);break;case cr$Qa:cr$Ob(c,"error",b);break;case cr$Ra:cr$Ob(c,"warn",b);break;default:cr$Ob(c,"debug",b)}else window.opera?window.opera.postError(b):this.Ga+=b}};var cr$Nb=window.console,cr$Ob=function(a,b,c){if(a[b])a[b](c);else a.log(c)};var cr$6=function(a,b){cr$2.call(this,b);this.H=a};cr$m(cr$6,cr$2);cr$6.prototype.b=function(){return this.H+":"+this.g.b()};cr$6.prototype.onMessage=function(a){a instanceof Array&&(2==a.length&&a[0]==this.H)&&cr$6.f.onMessage.call(this,a[1])};cr$6.prototype.send=function(a){cr$6.f.send.call(this,[this.H,a])};var cr$7=function(a,b){cr$U.call(this);this.H=a;this.g=b;this.ab=cr$S(this.g,cr$rb.CHANNEL_CREATED,cr$j(this.kb,this))};cr$m(cr$7,cr$X);cr$7.prototype.b=function(){return this.H+":"+this.g.b()};cr$7.prototype.kb=function(a){a.channel&&this.ka(new cr$6(this.H,a.channel))};cr$7.prototype.d=function(){cr$7.f.d.call(this);cr$T(this.ab);cr$jb(this.g)||this.g.i()};var cr$8=function(a,b,c,d){var e=this.ob=new cr$Mb;if(cr$c!=e.Qa){cr$_a();var f=cr$H,g=e.jb;f.M||(f.M=[]);f.M.push(g);e.Qa=cr$c}this.L=new cr$4(a,b,c,d)};cr$=cr$8.prototype;cr$.a=cr$I("chromekey.receiver.Receiver");cr$.tb=function(){return this.L};cr$.sb=function(a){if(this.L.Ta(a))return new cr$7(a,this.L);cr$a(Error("Not supported namespace: "+a))};cr$.start=function(a){this.L.Fa(a);this.a.info("Receiver started.")};cr$.stop=function(){this.L.i();this.a.info("Receiver stopped.")};var cr$9=function(a){this.La=a;this.W={}};cr$m(cr$9,cr$J);var cr$Pb=[];cr$9.prototype.Y=function(a,b,c,d,e){cr$g(b)||(cr$Pb[0]=b,b=cr$Pb);for(var f=0;f<b.length;f++){var g=cr$S(a,b[f],c||this,d||cr$e,e||this.La||this);if(!g)break;this.W[g.key]=g}return this};
cr$9.prototype.oa=function(a,b,c,d,e){if(cr$g(b))for(var f=0;f<b.length;f++)this.oa(a,b[f],c,d,e);else{t:if(e=e||this.La||this,d=!!d,c=cr$bb(c||this),cr$N(a))a=a.k[b],b=-1,a&&(b=cr$pb(a,c,d,e)),e=-1<b?a[b]:cr$d;else{if(a=cr$fb(a,b,d))for(b=0;b<a.length;b++)if(!a[b].l&&a[b].o==c&&a[b].capture==d&&a[b].v==e){e=a[b];break t}e=cr$d}e&&(cr$T(e),delete this.W[e.key])}return this};cr$9.prototype.d=function(){cr$9.f.d.call(this);var a=this.W,b=cr$T,c;for(c in a)b.call(cr$b,a[c],c,a);this.W={}};
cr$9.prototype.handleEvent=function(){cr$a(Error("EventHandler.handleEvent not implemented"))};var cr$$=function(){cr$Y.call(this,"ramp");this.P=this.Q=this.R=this.c=cr$d;this.da=0;this.B=cr$e;this.va=this.ua=this.C=cr$b;this.u=cr$d;cr$Bb(cr$j(this.wa,this),1E3)};cr$m(cr$$,cr$Y);var cr$Qb=function(a,b){cr$9.call(this);this.Y(b,"loadedmetadata");this.Y(b,"error");this.m=a;this.n=cr$d};cr$m(cr$Qb,cr$9);
cr$Qb.prototype.handleEvent=function(a){if(this.n)switch(a.type){case "loadedmetadata":this.m.a.info("Received loadedmetadata event from media element");this.m.xa(this.n.target,this.n.message,cr$c);this.n=cr$d;break;case "error":this.m.a.info("Received error event from media element"),this.m.S(this.n.target,this.n.message,-2),a=this.m,a.c&&(a.c.src="",a.ya(cr$d),a.za(cr$d),a.Aa(cr$d)),this.n=cr$d}};cr$=cr$$.prototype;cr$.a=cr$I("chromekey.receiver.RemoteMedia");
cr$.d=function(){cr$$.f.d.call(this);this.u&&this.u.i()};cr$.xb=function(a){this.c=a;this.u&&(this.u.i(),this.u=cr$d);this.c&&(this.u=new cr$Qb(this,a))};cr$.Aa=function(a){this.R=a};cr$.za=function(a){this.Q=a};cr$.ya=function(a){this.P=a};var cr$Rb=function(a){var b={cmd_id:0,type:"STATUS",status:a.getStatus()};a.Z().forEach(cr$j(function(a){if(a.isOpen())try{a.send(b)}catch(d){cr$E(this.a,d)}},a))},cr$Sb=function(a){a.c&&(a.C=a.c.currentTime,a.ua=a.c.currentTime,a.va=Date.now())};
cr$$.prototype.wa=function(){cr$Bb(cr$j(this.wa,this),1E3);if(this.c){var a=this.C;this.C=this.c.currentTime;if(this.B)if(this.C==a)this.B=cr$e;else{if(a=1E3*(this.C-this.ua)-(Date.now()-this.va),!(1E3<a||-1E3>a))return}else if(this.C!=a)this.B=cr$c;else return;this.a.info("Media state changed: time_progress="+this.B);cr$Rb(this)}};cr$$.prototype.onOpen=function(a){this.a.info("onOpen");var b={cmd_id:0,type:"STATUS",status:this.getStatus()};try{a.target.send(b)}catch(c){cr$E(this.a,c)}};
cr$$.prototype.onMessage=function(a){var b=a.message;a=a.target;try{cr$3a(b,"cmd_id","type");var c=cr$c,d=cr$c;switch(b.type){case "LOAD":d=c=cr$e;this.onLoad(a,b);break;case "INFO":c=cr$e;this.onInfo();break;case "PLAY":this.onPlay(b.position);break;case "STOP":d=cr$e;this.onStop();break;case "VOLUME":this.onVolume(b.volume,b.muted);break;default:cr$a(Error("Invalid message type: "+b.type))}d&&a.send({cmd_id:b.cmd_id,type:"RESPONSE",status:this.getStatus()});c&&cr$Rb(this)}catch(e){cr$E(this.a,e)}};
cr$$.prototype.onLoad=function(a,b){this.a.info("onLoad: src="+b.src);if(this.c){b.src&&(this.c.src=b.src);var c=this.u,d=new cr$2a("",b,a);c.n&&c.m.S(c.n.target,c.n.message,-3);c.n=d;this.c.autoplay=b.autoplay||cr$e;this.R=b.title;this.Q=b.image_url;this.P=b.content_info;this.c.load();this.c.autoplay&&cr$Sb(this)}else this.S(a,b,-1)};cr$$.prototype.onInfo=function(){cr$F(this.a,"onInfo")};
cr$$.prototype.onPlay=function(a){this.a.info("onPlay: position="+a);this.c&&(a!=cr$b&&(this.c.currentTime=a),this.c.play())};cr$$.prototype.onStop=function(){this.a.info("onStop");this.c&&this.c.pause()};cr$$.prototype.onVolume=function(a,b){this.a.info("onVolume: volume="+a+", muted="+b);this.c&&(a!=cr$b&&(this.c.volume=a),b!=cr$b&&(this.c.muted=b))};var cr$Tb=function(a,b){return{event_sequence:a.da++,error:{domain:"ramp",code:b}}};
cr$$.prototype.getStatus=function(){cr$G(this.a,"getStatus");if(this.c==cr$b)return cr$Tb(this,-1);if(!this.c.src)return{event_sequence:this.da++,state:0};cr$Sb(this);var a=this.c.paused;a&&(this.B=cr$e);a={event_sequence:this.da++,state:a?1:2,content_id:this.c.src,current_time:this.c.currentTime,duration:this.c.duration,volume:this.c.volume,muted:this.c.muted,time_progress:this.B};this.R&&(a.title=this.R);this.Q&&(a.image_url=this.Q);this.P&&(a.content_info=this.P);return a};
cr$$.prototype.xa=function(a,b,c){a.send({cmd_id:b.cmd_id,type:"RESPONSE",status:this.getStatus()});c&&cr$Rb(this)};cr$$.prototype.S=function(a,b,c){a.send({cmd_id:b.cmd_id,type:"RESPONSE",status:cr$Tb(this,c)})};cr$l("chromekey.receiver.VERSION","0.9.1");cr$l("chromekey.receiver.logger",cr$L);cr$l("chromekey.receiver.logger.setLevelValue",cr$L.wb);cr$l("chromekey.receiver.MessageEvent",cr$2a);cr$l("chromekey.receiver.ChannelFactoryEvent",cr$qb);cr$l("chromekey.receiver.ChannelFactory",cr$X);cr$l("chromekey.receiver.ChannelFactory.EventType",cr$rb);cr$l("chromekey.receiver.ChannelFactory.prototype.getDebugString",cr$X.prototype.b);cr$l("chromekey.receiver.ChannelFactory.prototype.onChannelCreated",cr$X.prototype.ka);
cr$l("chromekey.receiver.ChannelHandler",cr$Y);cr$l("chromekey.receiver.ChannelHandler.prototype.getDebugString",cr$Y.prototype.b);cr$l("chromekey.receiver.ChannelHandler.prototype.addChannelFactory",cr$Y.prototype.Ma);cr$l("chromekey.receiver.ChannelHandler.prototype.removeChannelFactory",cr$Y.prototype.vb);cr$l("chromekey.receiver.ChannelHandler.prototype.getChannels",cr$Y.prototype.Z);cr$l("chromekey.receiver.Channel",cr$V);cr$l("chromekey.receiver.Channel.EventType",cr$W);
cr$l("chromekey.receiver.Channel.prototype.getDebugString",cr$V.prototype.b);cr$l("chromekey.receiver.Channel.prototype.onOpen",cr$V.prototype.onOpen);cr$l("chromekey.receiver.Channel.prototype.onClosed",cr$V.prototype.onClosed);cr$l("chromekey.receiver.Channel.prototype.onError",cr$V.prototype.onError);cr$l("chromekey.receiver.Channel.prototype.onMessage",cr$V.prototype.onMessage);cr$l("chromekey.receiver.ConnectionService",cr$4);cr$l("chromekey.receiver.ConnectionService.VERSION",2);
cr$l("chromekey.receiver.ConnectionService.prototype.support",cr$4.prototype.Ta);cr$l("chromekey.receiver.ConnectionService.prototype.connect",cr$4.prototype.Fa);cr$l("chromekey.receiver.ConnectionService.prototype.disconnect",cr$4.prototype.disconnect);cr$l("chromekey.receiver.ConnectionService.prototype.isConnected",cr$4.prototype.ub);cr$l("chromekey.receiver.Receiver",cr$8);cr$l("chromekey.receiver.Receiver.prototype.getConnectionService",cr$8.prototype.tb);
cr$l("chromekey.receiver.Receiver.prototype.createChannelFactory",cr$8.prototype.sb);cr$l("chromekey.receiver.Receiver.prototype.start",cr$8.prototype.start);cr$l("chromekey.receiver.Receiver.prototype.stop",cr$8.prototype.stop);cr$l("chromekey.receiver.RemoteMedia",cr$$);cr$l("chromekey.receiver.RemoteMedia.NAMESPACE","ramp");cr$l("chromekey.receiver.RemoteMedia.prototype.setMediaElement",cr$$.prototype.xb);cr$l("chromekey.receiver.RemoteMedia.prototype.setTitle",cr$$.prototype.Aa);
cr$l("chromekey.receiver.RemoteMedia.prototype.setImageUrl",cr$$.prototype.za);cr$l("chromekey.receiver.RemoteMedia.prototype.setContentInfo",cr$$.prototype.ya);cr$l("chromekey.receiver.RemoteMedia.prototype.sendSuccessResponse",cr$$.prototype.xa);cr$l("chromekey.receiver.RemoteMedia.prototype.sendErrorResponse",cr$$.prototype.S);
